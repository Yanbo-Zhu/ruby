
数组存储数据或数据列表。 它可以包含所有类型的数据。 数组中的数据之间用逗号分隔，并用方括号括起来。 例如，

```shell
["Akash", "Ankit", "Aman"]
```

数组中的元素由其位置检索。 数组中元素的位置以`0`开头。

**示例：**

```shell
#!/usr/bin/ruby   

data = ["Akash", "Ankit", "Aman"]   
puts data[0]   
puts data[1]   
puts data[2]
```

将上面代码保存到一个文件：_arrays-example.rb_ 中，执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby arrays-example.rb
Akash
Ankit
Aman

F:\worksp\ruby>
```



# 1 可视化模型


数组是数字索引列表。 想象一下，有一张空白的纸，画了三个小盒子：

```
 ---  ---  ---
|   ||   ||   |
 ---  ---  ---
```

可以按照从左到右对每一个位置进行编号：

```
 ---  ---  ---
|   ||   ||   |
 ---  ---  ---
  0    1    2
```

然后在每个框中放入字符串(或其它值)：

```
 -------------  ---------  ----------
| "Breakfast" || "Lunch" || "Dinner" |
 -------------  ---------  ----------
       0            1           2
```

现在变成一个有三元素的数组。 Ruby数组的大小可以增长和缩小，所以如果添加一个元素，它通常会在结束位置添加，索引值也会变递增`1`：

```
 -------------  ---------  ----------  -----------
| "Breakfast" || "Lunch" || "Dinner" || "Dessert" |
 -------------  ---------  ----------  -----------
       0            1           2           3
```

请注意，最后一个元素的位置总是比元素的数量小`1`。

数组中在索引为`2`位置对应的数据值为“`Dinner`”。最后一个元素对应的数据值为“`Dessert`”。

# 2 代码中的数组

以下是Ruby代码中相同建模的方法：

```ruby
irb(main):049:0> meals = ["Breakfast", "Lunch", "Dinner"]
=> ["Breakfast", "Lunch", "Dinner"]
irb(main):050:0> meals << "Dessert"
=> ["Breakfast", "Lunch", "Dinner", "Dessert"]
irb(main):051:0> meals[2]
=> "Dinner"
irb(main):052:0> meals.last
=> "Dessert"
irb(main):053:0>
```

在上面代码运行结果中，观察到…

- 该数组是通过将数据片段放在方括号(`[]`)之间并用逗号分隔来创建的。
    
- 通过使用“铲子运算符”(`<<`)添加一个元素到数组的末尾
    
- 通过使用方括号(`[]`)在指定索引位置来获取元素
    
- 数组中一些方便的方法，如`.last`


# 3 创建数组

Ruby数组以许多方式创建。

- 使用文字构造函数 `[]`
- 使用类的`new`方法

## 3.1 使用文字构造

使用文字构造函数`[]`构建Ruby数组。 单个数组可以包含不同类型的对象。

例如，以下数组包含一个整数，浮点数和一个字符串。

```ruby
#!/usr/bin/ruby   

arr = [4, 4.0, "maxsu", ]   
puts arr
```

执行上面代码，得到以下输出结果 -

```ruby
F:\worksp\ruby>ruby array-contruct.rb
4
4.0
maxsu

F:\worksp\ruby>
```

## 3.2 使用类的new方法

通过使用零个，一个或多个参数调用`::new`方法来构造一个Ruby数组。

**语法：**

```ruby
arrayName = Array.new
```

设置数组的大小，如下语法 -

**语法：**

```ruby
arrayName = Array.new(10)
```

在这里，要创建的数组大小是`10`个元素。

要知道数组的大小，使用 `size` 或 `length` 方法。

**示例：**

```ruby
#!/usr/bin/ruby   

exm = Array.new(10)   
puts exm.size    
puts exm.length
```

执行上面代码，输出结果如下 -

```shell
F:\worksp\ruby>ruby array-size.rb
10
10

F:\worksp\ruby>
```

**示例2**

```ruby
#!/usr/bin/ruby   
exm = Array("a"..."z")   
puts "#{exm}"
```

执行上面代码得到以下结果 -

```shell
F:\worksp\ruby>ruby array-a2z.rb
["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y"]

F:\worksp\ruby>
```

# 4 访问数组元素

可以使用`#[]`方法访问Ruby数组中的元素。也可以传递一个或多个参数，甚至传递一系列参数。

```ruby
#[] method
```

**示例**

```ruby
#!/usr/bin/ruby   
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days[0]      
puts days[10]   
puts days[-2]     
puts days[2, 3]   
puts days[1..7]
```

执行上面代码，得到输出结果如下 -

```shell
F:\worksp\ruby>ruby array-elements.rb
Mon

Sat
Wed
Thu
Fri
Tue
Wed
Thu
Fri
Sat
Sun

F:\worksp\ruby>
```

1 **at方法**

要访问特定的元素，也可以使用`at`方法。

**示例：**

```ruby
#!/usr/bin/ruby   
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.at(0)   
puts days.at(-1)   
puts days.at(5)
```

执行上面代码，得到输出结果如下 -

```shell
F:\worksp\ruby>ruby array-at.rb
Mon
Sun
Sat

F:\worksp\ruby>
```

2 **slice方法**

slice方法类似于`#[]`方法。

3 **fetch方法**

fetch方法用于为数组范围索引提供默认的错误值。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-fetch.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.fetch(10)
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-fetch.rb
array-fetch.rb:4:in `fetch': index 10 outside of array bounds: -7...7 (IndexError)
        from array-fetch.rb:4:in `<main>'

F:\worksp\ruby>
```

修改上面示例代码，在未找到元素时返回一个默认的值 -

```ruby
#!/usr/bin/ruby 
# file : array-fetch-df.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.fetch(10, 'NotFound')
```

执行上面代码，得到以下结果 -

```ruby
F:\worksp\ruby>ruby array-fetch-df.rb
NotFound

F:\worksp\ruby>
```

4 **first 和 last 方法**

`first` 和 `last` 方法方法将分别返回数组的第一个和最后一个元素。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-first-last.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.first   
puts days.last
```

执行上面代码，得到以下结果 -

```ruby
F:\worksp\ruby>ruby array-first-last.rb
Mon
Sun

F:\worksp\ruby>
```

5 **take 方法**

`take`方法返回数组的前`n`个元素。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-take.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.take(1)   
puts days.take(2)   
puts days.take(3)
```

执行上面代码，得到以下结果 -

```ruby
F:\worksp\ruby>ruby array-take.rb
Mon
Mon
Tue
Mon
Tue
Wed

F:\worksp\ruby>
```

6 **drop方法**

`drop`方法与`take`方法相反。 它返回在第`n`个元素之后的所有元素。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-drop.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]   
puts days.drop(5)   
puts days.drop(6)
```

执行上面代码，得到以下结果 -

```ruby
F:\worksp\ruby>ruby array-drop.rb
Sat
Sun
Sun

F:\worksp\ruby>
```



# 5 将元素项添加到数组

可以以不同的方式向Ruby数组添加元素。

- `push` 或 `<<`
- `unshift`
- `insert`

**push 或 <<**

使用`push`或`<<`，可以在数组的末尾添加项目/元素。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-push.rb
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]  
puts days.push("Today")   
puts '-------------------------------'
puts days << ("Tomorrow")
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-push.rb
Mon
Tue
Wed
Thu
Fri
Sat
Sun
Today
-------------------------------
Mon
Tue
Wed
Thu
Fri
Sat
Sun
Today
Tomorrow

F:\worksp\ruby>
```



**unshift方法**
使用`unshift`，可以在数组的开头添加一个新元素。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-unshift.rb
days = ["Fri", "Sat", "Sun"]   
puts days.unshift("Today")
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-unshift.rb
Today
Fri
Sat
Sun

F:\worksp\ruby>
```

**insert方法**
使用`insert`，可以在数组中的任何位置添加一个新元素。 在这里，首先需要要定位元素的索引位置。

示例：

```ruby
#!/usr/bin/ruby 
# file : array-insert.rb
days = ["Fri", "Sat", "Sun"]   
puts days.insert(2, "Thursday")
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-insert.rb
Fri
Sat
Thursday
Sun

F:\worksp\ruby>
```



# 6 从数组中删除项/元素

可以使用以下几种方式来删除Ruby数组元素。

- pop
- shift
- delete
- uniq



**pop方法**
使用`pop`方法，可以从数组的末尾删除项/元素。它返回删除的数据项/元素。

**示例：**

```ruby
#!/usr/bin/ruby 
# file : array-pop.rb
days = ["Fri", "Sat", "Sun"]   
puts days.pop
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-pop.rb
Sun

F:\worksp\ruby>
```



**shift方法**
使用`shift`，可以从数组的起始处删除项/元素。 它返回删除的项目/元素。

**示例：**

```ruby
#!/usr/bin/ruby 
# file : array-shift.rb
days = ["Fri", "Sat", "Sun"]   
puts days.shift
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-shift.rb
Fri

F:\worksp\ruby>
```



**delete方法**
使用`delete`方法，可以从数组中的任意位置删除项(元素)。 它返回删除的项目(元素)。

**示例：**

```ruby
#!/usr/bin/ruby 
# file : array-delete.rb
days = ["Fri", "Sat", "Sun"]   
puts days.delete("Sat")
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-delete.rb
Sat

F:\worksp\ruby>
```



**uniq方法**
使用`uniq`方法，可以从数组中删除重复的元素。它返回删除重复元素后剩余的数组。

**示例：**

```ruby
#!/usr/bin/ruby 
# file : array-uniq.rb
days = ["Fri", "Sat", "Sun", "Sat"]   
puts days.uniq
```

执行上面代码，得到以下结果 -

```shell
F:\worksp\ruby>ruby array-uniq.rb
Fri
Sat
Sun

F:\worksp\ruby>
```




# 7 常用数组方法

数组有很多很酷的东西。 以下是几个例子：

**.sort方法**

`sort`方法将返回一个新的数组，其中元素是已经被排序过了。 如果元素是字符串，它们将以字母顺序返回。 如果它们是数字，它们将按升值顺序回来。尝试下面示例：

```ruby
irb(main):056:0> array1 = ["this", "is", "an", "array"]
=> ["this", "is", "an", "array"]
irb(main):057:0> array1.sort
=> ["an", "array", "is", "this"]
irb(main):058:0> array1
=> ["this", "is", "an", "array"]
irb(main):059:0>
```

可以使用`sort`方法重新排列元素的顺序。使用`each`方法遍历每个元素。使用`join`方法将它们一起混合成一个字符串。使用`index`方法找到特定元素的地址。可以使用`include?`方法询问数组是否包含指定的元素。

使用数组只要需要一个列表，其中元素是以特定的顺序排序的。

**其他的尝试**

在数组上尝试下面这些常见的方法：

- `each`
- `collect`
- `first` 和 `last`
- `shuffle`

可以参考这个文档了解更多详细信息：[http://www.ruby-doc.org/core-2.1.2/Array.html](http://www.ruby-doc.org/core-2.1.2/Array.html)

//更多请阅读：https://www.yiibai.com/ruby/quick-start.html


**数组循环**

```ruby
games.each do |game|
    puts "我喜欢<<#{game}>>"
end

games.each_with_index do |game,i|
    puts "#{i+1}.#{game}"
end
```

**数组合并**：

```ruby
puts games.join(";")
```